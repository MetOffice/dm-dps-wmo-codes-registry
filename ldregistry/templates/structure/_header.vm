## Common header for all pages.
## Imports all the css, plus core jquery.
##
## Optional configuration parameters which can be set on the calling page:
##   $pageTitle   - title of the page, defaults to the resgistry name : uri
##   $extraCSS    - comma-separated list of additional css files from ui/assets to load
##   $extraCSSRaw - comma-separated list of additional css files (absolute URIs)
##
## Input parameters:
##   $uri     - the requested URI, relative to the registry root (generated by registry-core)
##
## Exported parameters
##   $root        - the (server-relative) root URL for the page
##   $uiroot      - the (server-relative) root URL for all ui pages
##   $assets      - the (server-relative) root URL for all ui assets

#set($root=$registry.rootPath)
#set($uiroot="$root/ui")
#set($assets="$uiroot/assets")

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-70PCS6Q3VQ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-70PCS6Q3VQ');
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="apple-touch-icon" sizes="180x180" href="$assets/images/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="$assets/images/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="$assets/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="$assets/images/favicon/manifest.json">
    <link rel="mask-icon" href="$assets/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <link rel="shortcut icon" href="$assets/images/favicon/favicon.ico">
    <meta name="msapplication-config" content="$assets/images/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <title>#if($pageTitle) $pageTitle #else #if ($registry.configExtensions.registryName) $registry.configExtensions.registryName #else $msg['registry.label'] #end #if($uri): $uri#end #end</title>

    <link href="$assets/css/reg-style.css" rel="stylesheet" />

    <link href="$assets/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet" />
    <link href="$assets/font-awesome/css/font-awesome.css" rel="stylesheet" />

    <link type="text/css" rel="stylesheet" href="$assets/css/ui.css" />
    <link type="text/css" rel="stylesheet" href="$assets/css/jquery.dataTables.min.css" />
    <link href="$assets/css/bootstrap-editable.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="$assets/css/copy-to-clipboard.css" />
    <link rel="stylesheet" type="text/css" href="$assets/css/joint.min.css" />

    #if($extraCSS)
      #foreach($file in $extraCSS.split(","))
        <link type="text/css" rel="stylesheet" href="$assets/css/$file" />
      #end
    #end

    #if($extraCSSRaw)
      #foreach($file in $extraCSSRaw.split(","))
        <link type="text/css" rel="stylesheet" href="$file" />
      #end
    #end

    <script src="$assets/js/jquery-3.6.0.min.js"></script>
    <script src="$assets/js/jquery.form.js"></script>
    <script src="$assets/js/copy-to-clipboard.js"></script>

    <!-- Force all keyboard tabbed elements to have this outline style. -->
    <style>
      *:focus-visible {
        outline: orangered dotted 2px !important;
      }
    </style>

  </head>

  <body onload="onLoadInitialisation();">
  <span style="visibility:hidden; display:none;" id="copyButtonMode1"><svg height="16" width="16" viewBox="0 0 16 16" class="copy2clip">
    <path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path>
    <path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path>
  </svg></span>

  <span style="visibility:hidden; display:none;" id="copyButtonMode2"><svg height="16" width="16" viewBox="0 0 16 16" class="copy2clip">
    <path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path>
  </svg></span>